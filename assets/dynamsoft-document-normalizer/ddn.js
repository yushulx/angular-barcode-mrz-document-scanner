/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Document Normalizer JS Edition
* @website http://www.dynamsoft.com
* @copyright Copyright 2024, Dynamsoft Corporation
* @author Dynamsoft
* @version 2.4.20
* @fileoverview Dynamsoft JavaScript Library for Document Normalizer
* More info on ddn JS: https://www.dynamsoft.com/document-normalizer/docs/web/programming/javascript/
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("dynamsoft-core")):"function"==typeof define&&define.amd?define(["exports","dynamsoft-core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Dynamsoft=e.Dynamsoft||{},e.Dynamsoft.DDN={}),e.Dynamsoft.Core)}(this,(function(e,t){"use strict";const s="undefined"==typeof self,o=(()=>{if(!s&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),n=e=>{if(null==e&&(e="./"),s);else{let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e};t.autoDiscoveryPaths.ddn={version:"2.4.20",path:o},t.workerAutoResources.ddn={js:!0,wasm:!0,deps:["license","dip"]},t.mapPackageRegister.ddn={handleNormalizedImageResultItem:function(e){let s=e,o=t._getNorImageData(s.imageData);s.toCanvas=()=>t._toCanvas(o),s.toImage=e=>t._toImage(e,o),s.toBlob=e=>t._toBlob(e,o),s.saveToFile=async(e,s)=>{if(!e)return null;if("string"!=typeof e)throw new TypeError("FileName must be of type string.");return t._saveToFile(o,e,s)}}};const r="1.4.10";"string"!=typeof t.autoDiscoveryPaths.std&&t.compareVersion(t.autoDiscoveryPaths.std.version,r)<0&&(t.autoDiscoveryPaths.std={version:r,path:n(o+`../../dynamsoft-capture-vision-std@${r}/dist/`)});const a="2.4.20";(!t.autoDiscoveryPaths.dip||"string"!=typeof t.autoDiscoveryPaths.dip&&t.compareVersion(t.autoDiscoveryPaths.dip.version,a)<0)&&(t.autoDiscoveryPaths.dip={version:a,path:n(o+`../../dynamsoft-image-processing@${a}/dist/`)});var i;e.EnumImageColourMode=void 0,(i=e.EnumImageColourMode||(e.EnumImageColourMode={}))[i.ICM_COLOUR=0]="ICM_COLOUR",i[i.ICM_GRAYSCALE=1]="ICM_GRAYSCALE",i[i.ICM_BINARY=2]="ICM_BINARY",e.DocumentNormalizerModule=class{static getVersion(){const e=t.innerVersions.ddn&&t.innerVersions.ddn.wasm,s=t.innerVersions.ddn&&t.innerVersions.ddn.worker;return`2.4.20(Worker: ${s||"Not Loaded"}, Wasm: ${e||"Not Loaded"})`}async setThresholdValue(e,s,o,n){return await t.loadWasm("ddn"),await new Promise(((r,a)=>{let i=t.getNextTaskID();t.mapTaskCallBack[i]=async e=>{if(e.success)return r();{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,a(t)}},t.worker.postMessage({type:"ddn_setThresholdValue",id:i,instanceID:e._instanceID,body:{threshold:s,leftLimit:o,rightLimit:n}})}))}}}));

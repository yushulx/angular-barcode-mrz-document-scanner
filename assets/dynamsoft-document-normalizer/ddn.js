/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Document Normalizer JS Edition
* @website http://www.dynamsoft.com
* @copyright Copyright 2024, Dynamsoft Corporation
* @author Dynamsoft
* @version 2.2.10
* @fileoverview Dynamsoft JavaScript Library for Document Normalizer
* More info on ddn JS: https://www.dynamsoft.com/document-normalizer/docs/web/programming/javascript/
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("dynamsoft-core")):"function"==typeof define&&define.amd?define(["exports","dynamsoft-core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Dynamsoft=e.Dynamsoft||{},e.Dynamsoft.DDN={}),e.Dynamsoft.Core)}(this,(function(e,t){"use strict";const n="undefined"==typeof self,r=(()=>{if(!n&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),o=e=>{if(null==e&&(e="./"),n);else{let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e},s=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),t},a=async(e,t)=>{const n=s(t);return new Promise(((t,r)=>{n.toBlob((e=>t(e)),e)}))};null==t.engineResourcePaths.ddn&&(t.engineResourcePaths.ddn=r),t.workerAutoResources.ddn={js:!0,wasm:!0,deps:["license","dip"]},t.mapPackageRegister.ddn={handleNormalizedImageResultItem:function(e){let n=e,r=(e=>{let n,r=e.bytes;if(!(r&&r instanceof Uint8Array))throw Error("Parameter type error");if(Number(e.format)===t.EnumImagePixelFormat.IPF_BGR_888){const e=r.length/3;n=new Uint8ClampedArray(4*e);for(let t=0;t<e;++t)n[4*t]=r[3*t],n[4*t+1]=r[3*t+1],n[4*t+2]=r[3*t+2],n[4*t+3]=255}else if(Number(e.format)===t.EnumImagePixelFormat.IPF_RGB_888){const e=r.length/3;n=new Uint8ClampedArray(4*e);for(let t=0;t<e;++t)n[4*t]=r[3*t+2],n[4*t+1]=r[3*t+1],n[4*t+2]=r[3*t],n[4*t+3]=255}else if(Number(e.format)===t.EnumImagePixelFormat.IPF_GRAYSCALED){const e=r.length;n=new Uint8ClampedArray(4*e);for(let t=0;t<e;t++)n[4*t]=n[4*t+1]=n[4*t+2]=r[t],n[4*t+3]=255}else if(Number(e.format)===t.EnumImagePixelFormat.IPF_BINARY_8){const t=r.length,o=e.width,s=e.height,a=e.stride;n=new Uint8ClampedArray(o*s*4);for(let e=0;e<t;e++){let t=r[e],s=e%a,i=Math.floor(e/a);for(let e=0;e<8;e++){let r=s+e,a=4*(i*o+r);if(r>=o)break;n[a]=n[a+1]=n[a+2]=(128&t)/128*255,n[a+3]=255,t<<=1}}}else if(Number(e.format)===t.EnumImagePixelFormat.IPF_ABGR_8888){const e=r.length/4;n=new Uint8ClampedArray(r.length);for(let t=0;t<e;++t)n[4*t]=r[4*t],n[4*t+1]=r[4*t+1],n[4*t+2]=r[4*t+2],n[4*t+3]=r[4*t+3]}else if(Number(e.format)===t.EnumImagePixelFormat.IPF_ARGB_8888){const e=r.length/4;n=new Uint8ClampedArray(r.length);for(let t=0;t<e;++t)n[4*t]=r[4*t],n[4*t+1]=r[4*t+1],n[4*t+2]=r[4*t+2],n[4*t+3]=r[4*t+3]}return new ImageData(n,e.width,e.height)})(n.imageData);n.toCanvas=()=>s(r),n.toImage=e=>((e,t)=>{const n=s(t);let r=new Image,o=n.toDataURL(e);return r.src=o,r})(e,r),n.toBlob=e=>a(e,r),n.saveToFile=async(e,t)=>{if(!e)return null;if("string"!=typeof e)throw new TypeError("FileName must be of type string.");return(async(e,t,n)=>await new Promise((async(r,o)=>{try{const o=t.split(".");let s=o[o.length-1];const i=await a(`image/${s}`,e);o.length<=1&&(s="png");const l=new File([i],t,{type:`image/${s}`});if(n){const e=URL.createObjectURL(l),n=document.createElement("a");n.href=e,n.download=t,n.click()}return r(l)}catch(e){return o()}})))(r,e,t)}}};const i="1.2.0";"string"!=typeof t.engineResourcePaths.std&&t.compareVersion(t.engineResourcePaths.std.version,i)<0&&(t.engineResourcePaths.std={version:i,path:o(r+`../../dynamsoft-capture-vision-std@${i}/dist/`)});const l="2.2.10";(!t.engineResourcePaths.dip||"string"!=typeof t.engineResourcePaths.dip&&t.compareVersion(t.engineResourcePaths.dip.version,l)<0)&&(t.engineResourcePaths.dip={version:l,path:o(r+`../../dynamsoft-image-processing@${l}/dist/`)});var m;e.EnumImageColourMode=void 0,(m=e.EnumImageColourMode||(e.EnumImageColourMode={}))[m.ICM_COLOUR=0]="ICM_COLOUR",m[m.ICM_GRAYSCALE=1]="ICM_GRAYSCALE",m[m.ICM_BINARY=2]="ICM_BINARY",e.DocumentNormalizerModule=class{static getVersion(){const e=t.innerVersions.ddn&&t.innerVersions.ddn.wasm,n=t.innerVersions.ddn&&t.innerVersions.ddn.worker;return`2.2.10(Worker: ${n||"Not Loaded"}, Wasm: ${e||"Not Loaded"})`}},Object.defineProperty(e,"__esModule",{value:!0})}));

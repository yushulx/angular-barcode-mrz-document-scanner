/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Document Normalizer JS Edition
* @website http://www.dynamsoft.com
* @copyright Copyright 2024, Dynamsoft Corporation
* @author Dynamsoft
* @version 2.4.20
* @fileoverview Dynamsoft JavaScript Library for Document Normalizer
* More info on ddn JS: https://www.dynamsoft.com/document-normalizer/docs/web/programming/javascript/
*/
import{_getNorImageData as e,_toCanvas as t,_toImage as s,_toBlob as n,_saveToFile as r,autoDiscoveryPaths as i,workerAutoResources as d,mapPackageRegister as o,compareVersion as a,innerVersions as c,loadWasm as l,getNextTaskID as u,mapTaskCallBack as f,worker as m}from"dynamsoft-core";const p="undefined"==typeof self,g=(()=>{if(!p&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),h=e=>{if(null==e&&(e="./"),p);else{let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e};i.ddn={version:"2.4.20",path:g},d.ddn={js:!0,wasm:!0,deps:["license","dip"]},o.ddn={handleNormalizedImageResultItem:function(i){let d=i,o=e(d.imageData);d.toCanvas=()=>t(o),d.toImage=e=>s(e,o),d.toBlob=e=>n(e,o),d.saveToFile=async(e,t)=>{if(!e)return null;if("string"!=typeof e)throw new TypeError("FileName must be of type string.");return r(o,e,t)}}};const y="1.4.10";"string"!=typeof i.std&&a(i.std.version,y)<0&&(i.std={version:y,path:h(g+`../../dynamsoft-capture-vision-std@${y}/dist/`)});const I="2.4.20";(!i.dip||"string"!=typeof i.dip&&a(i.dip.version,I)<0)&&(i.dip={version:I,path:h(g+`../../dynamsoft-image-processing@${I}/dist/`)});class C{static getVersion(){const e=c.ddn&&c.ddn.wasm,t=c.ddn&&c.ddn.worker;return`2.4.20(Worker: ${t||"Not Loaded"}, Wasm: ${e||"Not Loaded"})`}async setThresholdValue(e,t,s,n){return await l("ddn"),await new Promise(((r,i)=>{let d=u();f[d]=async e=>{if(e.success)return r();{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}},m.postMessage({type:"ddn_setThresholdValue",id:d,instanceID:e._instanceID,body:{threshold:t,leftLimit:s,rightLimit:n}})}))}}var v;!function(e){e[e.ICM_COLOUR=0]="ICM_COLOUR",e[e.ICM_GRAYSCALE=1]="ICM_GRAYSCALE",e[e.ICM_BINARY=2]="ICM_BINARY"}(v||(v={}));export{C as DocumentNormalizerModule,v as EnumImageColourMode};
